"use strict";(self["webpackChunkproject2022"]=self["webpackChunkproject2022"]||[]).push([[686],{686:function(e,o,a){a.r(o),a.d(o,{default:function(){return k}});var s=a(252),n=a(963);const t={class:"container",id:"app"},i={class:"position-absolute top-50 start-50 translate-middle",ref:"loginDom"},r={action:""},l=(0,s._)("h3",{class:"text-center mb-3"},"登入",-1),d={class:"mb-3"},u={for:"userEmail"},c=(0,s.Uk)("Email address "),p={class:"mb-3"},m={for:"floatingPassword"},h=(0,s.Uk)("Password ");function f(e,o,a,f,g,w){return(0,s.wg)(),(0,s.iD)("div",t,[(0,s._)("div",i,[(0,s._)("form",r,[l,(0,s._)("div",d,[(0,s._)("label",u,[c,(0,s.wy)((0,s._)("input",{type:"email",class:"form-control",id:"userEmail",placeholder:"name@example.com","onUpdate:modelValue":o[0]||(o[0]=e=>g.user.username=e)},null,512),[[n.nr,g.user.username]])])]),(0,s._)("div",p,[(0,s._)("label",m,[h,(0,s.wy)((0,s._)("input",{type:"password",class:"form-control",id:"floatingPassword",placeholder:"Password","onUpdate:modelValue":o[1]||(o[1]=e=>g.user.password=e)},null,512),[[n.nr,g.user.password]])])]),(0,s._)("button",{type:"submit",class:"btn btn-primary btn-lg w-100",onClick:o[2]||(o[2]=(0,n.iM)(((...e)=>w.login&&w.login(...e)),["prevent"]))}," 登入 ")])],512)])}var g={name:"AdminComponent",data(){return{user:{username:"",password:""},api:{url:"https://vue3-course-api.hexschool.io/v2",path:"vue2022ron"},loader:{},fullPage:!1}},mounted(){},methods:{login(){this.onLoading(),this.axios.post(`${this.api.url}/admin/signin`,this.user).then((e=>{const{token:o,expired:a}=e.data;document.cookie=`myToken = ${o}; expires = ${new Date(a)};`,this.offLoading(),this.$router.push("/admin/manage")})).catch((e=>{console.dir(e),this.offLoading()}))},onLoading(){this.loader=this.$loading.show({isFullPage:this.fullPage,container:this.fullPage?null:this.$refs.loginDom,canCancel:!0,onCancel:this.onCancel,loader:"dots",width:64,height:64,backgroundColor:"#ffffff",opacity:.5})},offLoading(){setTimeout((()=>{this.loader.hide()}),1e3)}}},w=a(744);const b=(0,w.Z)(g,[["render",f]]);var k=b}}]);