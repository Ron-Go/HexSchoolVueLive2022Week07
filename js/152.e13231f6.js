"use strict";(self["webpackChunkproject2022"]=self["webpackChunkproject2022"]||[]).push([[152],{53:function(t,e,a){a.d(e,{Z:function(){return b}});var l=a(252),s=a(35),d=a(963);const r={"aria-label":"Page navigation example"},n={class:"pagination justify-content-center"},i=(0,l._)("span",{"aria-hidden":"true"},"«",-1),o=[i],c=["onClick"],u=(0,l._)("span",{"aria-hidden":"true"},"»",-1),p=[u];function _(t,e,a,i,u,_){return(0,l.wg)(),(0,l.iD)("nav",r,[(0,l._)("ul",n,[(0,l._)("li",{class:(0,s.C_)(["page-item",{disabled:!a.pagination.has_pre}])},[(0,l._)("a",{class:"page-link",href:"#",onClick:e[0]||(e[0]=(0,d.iM)((e=>t.$emit("send-page",a.pagination.current_page-1)),["prevent"])),"aria-label":"Previous"},o)],2),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.pagination.total_pages,((e,r)=>((0,l.wg)(),(0,l.iD)("li",{class:(0,s.C_)(["page-item",{active:e===a.pagination.current_page}]),key:"page"+r},[(0,l._)("a",{class:"page-link",href:"#",onClick:(0,d.iM)((a=>t.$emit("send-page",e)),["prevent"])},(0,s.zw)(e),9,c)],2)))),128)),(0,l._)("li",{class:(0,s.C_)(["page-item",{disabled:!a.pagination.has_next}])},[(0,l._)("a",{class:"page-link",href:"#",onClick:e[1]||(e[1]=(0,d.iM)((e=>t.$emit("send-page",a.pagination.current_page+1)),["prevent"])),"aria-label":"Next"},p)],2)])])}var h={props:["pagination"],data(){return{}}},m=a(744);const g=(0,m.Z)(h,[["render",_]]);var b=g},152:function(t,e,a){a.r(e),a.d(e,{default:function(){return Ft}});var l=a(252),s=a(35);const d={class:"container position-relative",style:{height:"100vh"}},r={class:"row",ref:"orderDom"},n={class:"col-12"},i={class:"table table-hover mt-5"},o=(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"下單時間"),(0,l._)("th",null,"Email"),(0,l._)("th",null,"購買內容"),(0,l._)("th",null,"應付金額"),(0,l._)("th",null,"付款狀態"),(0,l._)("th",null,"訂單管理")])],-1),c={class:"btn-group"},u=["onClick"],p=["onClick"];function _(t,e,a,_,h,m){const g=(0,l.up)("pagination"),b=(0,l.up)("orderModal"),w=(0,l.up)("statusModal");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",d,[(0,l._)("div",r,[(0,l._)("div",n,[(0,l._)("table",i,[o,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(h.tempOrders,((t,e)=>((0,l.wg)(),(0,l.iD)("tr",{key:"item"+e},[(0,l._)("td",null,(0,s.zw)(t.create_at),1),(0,l._)("td",null,(0,s.zw)(t.user.email),1),(0,l._)("td",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.products,((t,e)=>((0,l.wg)(),(0,l.iD)("ul",{class:"list-unstyled",key:"list"+e},[(0,l._)("li",null,(0,s.zw)(t.product.title)+" / 數量："+(0,s.zw)(t.qty)+(0,s.zw)(t.product.unit),1)])))),128))]),(0,l._)("td",null,(0,s.zw)(t.total),1),(0,l._)("td",null,[(0,l._)("span",{class:(0,s.C_)({"text-success":t.is_paid})},(0,s.zw)(""+(t.is_paid?"已付款":"未付款")),3)]),(0,l._)("td",null,[(0,l._)("div",c,[(0,l._)("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:e=>m.checkOrder(t)},"檢視",8,u),(0,l._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:e=>m.deleteOrder(t)},"刪除",8,p)])])])))),128))])])])],512),(0,l.Wm)(g,{pagination:h.pagination,onSendPage:m.getData},null,8,["pagination","onSendPage"])]),(0,l.Wm)(b,{order:h.order,is_delete:h.is_delete,onGetData:m.getData,onUpdataPaid:m.updataPaid,onDeleteOrder:m.deleteConfirm},null,8,["order","is_delete","onGetData","onUpdataPaid","onDeleteOrder"]),(0,l.Wm)(w,{ref:"statusModal"},null,512)],64)}var h=a(577),m=a(963);const g={class:"modal fade",id:"orderModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},b={class:"modal-dialog modal-lg"},w={class:"modal-content"},v={class:"modal-header bg-light"},f={class:"modal-title",id:"exampleModalLabel"},y={key:0},O={key:1},k=(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),x={key:0},D={class:"modal-body"},M={key:0,class:"container"},z={class:"row"},$={class:"col-6"},C=(0,l._)("h5",null,"用戶資料",-1),P={class:"table"},U=(0,l._)("th",{style:{width:"100px"}},"姓名",-1),L=(0,l._)("th",null,"E-mail",-1),Z=(0,l._)("th",null,"電話",-1),H=(0,l._)("th",null,"地址",-1),Y={class:"col-6"},q=(0,l._)("h5",null,"訂單細節",-1),K={class:"table"},S=(0,l._)("th",{style:{width:"100px"}},"訂單編號",-1),j=(0,l._)("th",null,"下單時間",-1),E=(0,l._)("th",null,"付款狀態",-1),W=(0,l._)("th",null,"付款時間",-1),F={class:"fw-bold"},G={key:0,class:"text-success"},T={key:1,class:"text-danger"},N=(0,l._)("th",null,"總金額",-1),V={class:"text-success fw-bold"},A=(0,l._)("h5",null,"選購商品",-1),B={class:"card-body"},I={class:"card-title"},J={class:"card-text"},Q=(0,l.Uk)(" 單價："),R={class:"pe-3"},X=(0,l.Uk)(" 數量："),tt={class:"pe-3"},et=(0,l.Uk)(" 總價："),at={class:"text-danger fw-bold"},lt={class:"d-flex justify-content-end"},st=(0,l._)("p",{class:"pe-3"},"變更付款狀態",-1),dt={class:"form-check form-switch"},rt=["for"],nt=["id"],it={class:"modal-footer"},ot={key:1},ct={class:"modal-body"},ut=(0,l._)("h4",{class:"text-danger text-center"},"確認刪除此訂單",-1),pt={class:"table"},_t=(0,l._)("th",{style:{width:"100px"}},"姓名",-1),ht=(0,l._)("th",null,"E-mail",-1),mt=(0,l._)("th",null,"電話",-1),gt=(0,l._)("th",null,"地址",-1),bt=(0,l._)("th",{style:{width:"100px"}},"訂單編號",-1),wt=(0,l._)("th",null,"下單時間",-1),vt=(0,l._)("th",null,"付款狀態",-1),ft=(0,l._)("th",null,"總金額",-1),yt={class:"text-success fw-bold"},Ot=(0,l._)("h5",null,"選購商品",-1),kt={class:"card-body"},xt={class:"card-title"},Dt={class:"card-text"},Mt=(0,l.Uk)(" 單價："),zt={class:"pe-3"},$t=(0,l.Uk)(" 數量："),Ct={class:"pe-3"},Pt=(0,l.Uk)(" 總價："),Ut={class:"text-danger fw-bold"},Lt={class:"modal-footer"};function Zt(t,e,a,d,r,n){return(0,l.wg)(),(0,l.iD)("div",g,[(0,l._)("div",b,[(0,l._)("div",w,[(0,l._)("div",v,[(0,l._)("h5",f,[a.is_delete?((0,l.wg)(),(0,l.iD)("span",O,"刪除訂單")):((0,l.wg)(),(0,l.iD)("span",y,"訂單細節"))]),k]),a.is_delete?((0,l.wg)(),(0,l.iD)("div",ot,[(0,l._)("div",ct,[ut,(0,l._)("table",pt,[(0,l._)("tbody",null,[(0,l._)("tr",null,[_t,(0,l._)("td",null,(0,s.zw)(r.tempOrder.user.name),1)]),(0,l._)("tr",null,[ht,(0,l._)("td",null,(0,s.zw)(r.tempOrder.user.email),1)]),(0,l._)("tr",null,[mt,(0,l._)("td",null,(0,s.zw)(r.tempOrder.user.tel),1)]),(0,l._)("tr",null,[gt,(0,l._)("td",null,(0,s.zw)(r.tempOrder.user.address),1)]),(0,l._)("tr",null,[bt,(0,l._)("td",null,(0,s.zw)(r.tempOrder.id),1)]),(0,l._)("tr",null,[wt,(0,l._)("td",null,(0,s.zw)(r.tempOrder.create_at),1)]),(0,l._)("tr",null,[vt,(0,l._)("td",{class:(0,s.C_)(["fw-bold",{"text-success":r.tempOrder.is_paid,"text-danger":!r.tempOrder.is_paid}])},(0,s.zw)(""+(r.tempOrder.is_paid?"已付款":"尚未付款")),3)]),(0,l._)("tr",null,[ft,(0,l._)("td",yt,"$"+(0,s.zw)(r.tempOrder.total),1)])])]),Ot,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.tempOrder.products,((t,e)=>((0,l.wg)(),(0,l.iD)("div",{key:"product"+e,class:"card w-75 mb-3"},[(0,l._)("div",kt,[(0,l._)("h5",xt,(0,s.zw)(t.product.title),1),(0,l._)("p",Dt,[Mt,(0,l._)("span",zt,"$"+(0,s.zw)(`${t.product.price}`),1),$t,(0,l._)("span",Ct,(0,s.zw)(`${t.qty}${t.product.unit}`),1),Pt,(0,l._)("span",Ut,"$"+(0,s.zw)(`${t.total}`),1)])])])))),128))]),(0,l._)("div",Lt,[(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:e[3]||(e[3]=e=>t.$emit("getData"))},"取消"),(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:e[4]||(e[4]=e=>t.$emit("deleteOrder",r.tempOrder))},"刪除")])])):((0,l.wg)(),(0,l.iD)("div",x,[(0,l._)("div",D,[r.tempOrder.user?((0,l.wg)(),(0,l.iD)("div",M,[(0,l._)("div",z,[(0,l._)("div",$,[C,(0,l._)("table",P,[(0,l._)("tbody",null,[(0,l._)("tr",null,[U,(0,l._)("td",null,(0,s.zw)(r.tempOrder.user.name),1)]),(0,l._)("tr",null,[L,(0,l._)("td",null,(0,s.zw)(r.tempOrder.user.email),1)]),(0,l._)("tr",null,[Z,(0,l._)("td",null,(0,s.zw)(r.tempOrder.user.tel),1)]),(0,l._)("tr",null,[H,(0,l._)("td",null,(0,s.zw)(r.tempOrder.user.address),1)])])])]),(0,l._)("div",Y,[q,(0,l._)("table",K,[(0,l._)("tbody",null,[(0,l._)("tr",null,[S,(0,l._)("td",null,(0,s.zw)(r.tempOrder.id),1)]),(0,l._)("tr",null,[j,(0,l._)("td",null,(0,s.zw)(r.tempOrder.create_at),1)]),(0,l._)("tr",null,[E,(0,l._)("td",{class:(0,s.C_)(["fw-bold",{"text-success":r.tempOrder.is_paid,"text-danger":!r.tempOrder.is_paid}])},(0,s.zw)(""+(r.tempOrder.is_paid?"已付款":"尚未付款")),3)]),(0,l._)("tr",null,[W,(0,l._)("td",F,[r.tempOrder.paid_date?((0,l.wg)(),(0,l.iD)("span",G,(0,s.zw)(r.tempOrder.paid_date),1)):((0,l.wg)(),(0,l.iD)("span",T,"時間不明"))])]),(0,l._)("tr",null,[N,(0,l._)("td",V,"$"+(0,s.zw)(r.tempOrder.total),1)])])]),A,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.tempOrder.products,((t,e)=>((0,l.wg)(),(0,l.iD)("div",{key:"product"+e,class:"card w-75 mb-3"},[(0,l._)("div",B,[(0,l._)("h5",I,(0,s.zw)(t.product.title),1),(0,l._)("p",J,[Q,(0,l._)("span",R,"$"+(0,s.zw)(`${t.product.price}`),1),X,(0,l._)("span",tt,(0,s.zw)(`${t.qty}${t.product.unit}`),1),et,(0,l._)("span",at,"$"+(0,s.zw)(`${t.total}`),1)])])])))),128)),(0,l._)("div",lt,[st,(0,l._)("div",dt,[(0,l._)("label",{class:"form-check-label",for:r.tempOrder.id},[(0,l.wy)((0,l._)("input",{class:"form-check-input",type:"checkbox",id:r.tempOrder.id,"onUpdate:modelValue":e[0]||(e[0]=t=>r.tempOrder.is_paid=t)},null,8,nt),[[m.e8,r.tempOrder.is_paid]]),(0,l._)("span",{class:(0,s.C_)(["fw-bold",{"text-success":r.tempOrder.is_paid}])},(0,s.zw)(""+(r.tempOrder.is_paid?"已付款":"未付款")),3)],8,rt)])])])])])):(0,l.kq)("",!0)]),(0,l._)("div",it,[(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",onClick:e[1]||(e[1]=e=>t.$emit("getData"))},"取消"),(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:e[2]||(e[2]=e=>t.$emit("updataPaid",r.tempOrder))},"變更付款狀態")])]))])])])}var Ht={props:["order","is_delete"],data(){return{tempOrder:{}}},mounted(){},watch:{order(){this.tempOrder={...this.order}}}},Yt=a(744);const qt=(0,Yt.Z)(Ht,[["render",Zt]]);var Kt=qt,St=a(364),jt=a(53),Et={components:{orderModal:Kt,statusModal:St.Z,pagination:jt.Z},data(){return{is_delete:!1,tempOrders:{},order:{},pagination:{},orderModal:{},statusModal:{}}},mounted(){this.orderModal=new h.Modal(document.querySelector("#orderModal")),this.statusModal=new h.Modal(document.querySelector("#statusModal")),this.getData()},methods:{getData(t=1){this.onLoading(),this.axios.get(`https://vue3-course-api.hexschool.io/v2/api/vue2022ron/admin/orders/?page=${t}`).then((t=>{this.tempOrders=t.data.orders,this.pagination=t.data.pagination,this.convertDate(),this.offLoading()})).catch((t=>{this.returnMessage(t.response.data.message,1e3)}))},convertDate(){this.tempOrders.forEach(((t,e)=>{const a=new Date(1e3*t.create_at);this.tempOrders[e].create_at=`${a.getFullYear()}/${a.getMonth()+1}/${a.getDate()} ${a.getHours()}:${a.getMinutes()}:${a.getSeconds()}`}))},updataPaid(t){const e={is_paid:t.is_paid};this.axios.put(`https://vue3-course-api.hexschool.io/v2/api/vue2022ron/admin/order/${t.id}`,{data:e}).then((t=>{console.dir(t),this.getData(),this.orderModal.hide(),this.returnMessage(t.data.message,1e3)})).catch((t=>{console.dir(t),this.returnMessage(t.data.message,1e3)}))},deleteConfirm(t){this.axios.delete(`https://vue3-course-api.hexschool.io/v2/api/vue2022ron/admin/order/${t.id}`).then((t=>{console.dir(t),this.getData(),this.orderModal.hide(),this.returnMessage(t.data.message,1e3)})).catch((t=>{console.dir(t),this.returnMessage(t.data.message,1e3)}))},checkOrder(t){this.is_delete=!1,this.order=t,this.orderModal.show()},deleteOrder(t){this.is_delete=!0,this.order=t,this.orderModal.show()},onLoading(){this.loader=this.$loading.show({isFullPage:!1,container:this.$refs.orderDom,canCancel:!1,onCancel:this.onCancel,loader:"dots",width:64,height:64,backgroundColor:"#ffffff",opacity:.5})},offLoading(){setTimeout((()=>{this.loader.hide()}),0)},returnMessage(t,e=2e3){setTimeout((()=>{this.$refs.statusModal.textContent=t,this.statusModal.show()}),e)}}};const Wt=(0,Yt.Z)(Et,[["render",_]]);var Ft=Wt},364:function(t,e,a){a.d(e,{Z:function(){return g}});var l=a(252),s=a(35);const d={class:"modal fade",id:"statusModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r={class:"modal-dialog"},n={class:"modal-content"},i=(0,l._)("div",{class:"modal-header bg-secondary"},[(0,l._)("h5",{class:"modal-title text-white",id:"exampleModalLabel"},"訊息提示"),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),o={class:"modal-body"},c={class:"fs-4"},u=(0,l._)("div",{class:"modal-footer"},[(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉")],-1);function p(t,e,a,p,_,h){return(0,l.wg)(),(0,l.iD)("div",d,[(0,l._)("div",r,[(0,l._)("div",n,[i,(0,l._)("div",o,[(0,l._)("p",c,(0,s.zw)(_.textContent),1)]),u])])])}var _={data(){return{textContent:""}}},h=a(744);const m=(0,h.Z)(_,[["render",p]]);var g=m}}]);